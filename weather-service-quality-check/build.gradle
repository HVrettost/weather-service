plugins {
    id 'checkstyle'
    id 'codenarc'
}

group 'myreika.weather'
version '1.0'

def weatherQualityCheckProjectBuildDir = project.buildDir

checkstyle {
    version '8.37'
    reportsDir file("$weatherQualityCheckProjectBuildDir/checkstyleReports")
    configDir project.file('config/checkstyle')
    configFile project.file('config/checkstyle/checkstyle.xml')
    ignoreFailures false
    showViolations true
    maxErrors 0
    checkstyleMain {
        source {
            files rootProject.files('weather-service-application/src/main/java')
        }
        reports {
            html.enabled true
            xml.enabled false
        }
    }
}

codenarc {
    version '2.0'
    configFile project.file('config/codenarc/codenarc.xml')
    ignoreFailures false
    reportsDir file("$weatherQualityCheckProjectBuildDir/codenarcReports")
    maxPriority1Violations 0
    maxPriority2Violations 0
    maxPriority3Violations 0
    reportFormat 'html'
    codenarcMain {
        source {
            files rootProject.files('weather-service-application/src/test/groovy')
            files rootProject.files('weather-service-application/src/main/groovy')
            //files rootProject.files('authorization-functional-tests/src/test/groovy')
            //files rootProject.files('authorization-functional-tests/src/main/groovy')
        }
    }
}