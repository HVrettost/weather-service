group 'myreika.weather'
version '1.0'

task wiremockStart(type: Exec) {
    commandLine 'docker-compose', '-f', 'docker-compose-dev.yml', 'up', '-d', 'weather-mocks'
}

task wiremockStop(type: Exec) {
    dependsOn('removeWiremockContainer')
    commandLine 'docker', 'rmi', 'weather-service-infrastructure_weather-mocks'
}

task removeWiremockContainer(type: Exec) {
    commandLine 'docker-compose', '-f', 'docker-compose-dev.yml', 'rm', '--stop', '--force', '-v', 'weather-mocks'
}

task mongoDbStart(type: Exec) {
    commandLine 'docker-compose', '-f', 'docker-compose-dev.yml', 'up', '-d', 'weather-database'
}

task mongoDbStop(type: Exec) {
    commandLine 'docker-compose', '-f', 'docker-compose-dev.yml', 'kill', 'weather-database'
}
